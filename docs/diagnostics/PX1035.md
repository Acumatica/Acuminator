# PX1035
This document describes the PX1035 diagnostic.

## Summary

| Code   | Short Description                                 | Type  | Code Fix    | 
| ------ | ------------------------------------------------- | ----- | ----------- | 
| PX1035 | The DAC has multiple key declarations which use the same set of fields | Warning (ISV Level 3:Â Informational) | Available | 

## Diagnostic Description
A DAC should not have multiple primary, foreign, or unique key declarations which include the same fields. 
The warning is shown only for DACs that have the `PXCacheName` or `PXPrimaryGraph` attribute.
The diagnostic does not check abstract DACs and DACs which have only unbound DAC properties (fully-unbound DACs used for custom popups and filters for inquiry forms).

The diagnostic also checks the declaration and implementation of a unique key by the following rules:
 - A single unique key in a DAC declaration must have the name `UK`.
 - Multiple unique keys can have arbitrary names but they must be declared inside a public static class named `UK`.
 - Primary and unique key declarations cannot have the same set of fields.
 - There cannot be a unique key declaration without a primary key declaration. You should turn at least one unique key into a primary key. Acuminator searches for an appropriate candidate for a primary key amoung the DAC key fields by the following rules:
   - If there is one key field in the DAC, Acuminator suggests to turn it into a primary key named `PK` by renaming and optionally changing its location to make it a first DAC's type member. This is actual for unique keys which are not direct DAC type members because they are declared in the `UK` container class.
   - If there is no appropriate unique key, Acuminator shows an error indicating the missing primary key.

To fix the issue, you should remove all primary, foreign, or unique key declarations except one and declare unique keys as described in the rules above.

The code fix does the following:
 - Removes all primary, foriegn, or unique key declarations except the one for which the diagnostic was selected.
 - In case  there is no primary key declaration and a unique key declaration, turns the unique key declaration into a primary key declaration.

## Example of Code for Which the Warning Is Shown

```C#
[PXCacheName("Sales Order")]
public class SOOrder : IBqlTable
{
	public class PK : PrimaryKeyOf<SOOrder>.By<orderType, orderNbr>
	{
		public static SOOrder Find(PXGraph graph, string orderType, string orderNbr) => FindBy(graph, orderType, orderNbr);
	}
	public class PK1 : PrimaryKeyOf<SOOrder>.By<orderType, orderNbr>
	{
		public static SOOrder Find(PXGraph graph, string orderType, string orderNbr) => FindBy(graph, orderType, orderNbr);
	}
	public class PK2 : PrimaryKeyOf<SOOrder>.By<orderType, orderNbr>
	{
		public static SOOrder Find(PXGraph graph, string orderType, string orderNbr) => FindBy(graph, orderType, orderNbr);
	}
	[PXDBString(IsKey = true, InputMask = "")]
	[PXDefault]
	[PXUIField(DisplayName = "Order Type")]
	public string OrderType { get; set; }
	public abstract class orderType : IBqlField { }
	[PXDBString(IsKey = true, InputMask = "")]
	[PXDefault]
	[PXUIField(DisplayName = "Order Nbr.")]
	public string OrderNbr { get; set; }
	public abstract class orderNbr : IBqlField { }
	[PXStringList(new[] { "N", "O" }, new[] { "New", "Open" })]
	[PXDBString]
	[PXUIField(DisplayName = "Status")]
	public string Status { get; set; }
	public abstract class status : IBqlField { }
	[PXDBTimestamp]
	public virtual byte[] tstamp { get; set; }
	public abstract class Tstamp : IBqlField { }
}
```

## Example of Code Fix

```C#
[PXCacheName("SO Order")]
public class SOOrder : IBqlTable
{
	public class PK : PrimaryKeyOf<SOOrder>.By<orderType, orderNbr>
	{
		public static SOOrder Find(PXGraph graph, string orderType, string orderNbr) => FindBy(graph, orderType, orderNbr);
	}

	[PXDBString(IsKey = true, InputMask = "")]
	[PXDefault]
	[PXUIField(DisplayName = "Order Type")]
	public string OrderType { get; set; }
	public abstract class orderType : IBqlField { }
	[PXDBString(IsKey = true, InputMask = "")]
	[PXDefault]
	[PXUIField(DisplayName = "Order Nbr.")]
	public string OrderNbr { get; set; }
	public abstract class orderNbr : IBqlField { }
	[PXStringList(new[] { "N", "O" }, new[] { "New", "Open" })]
	[PXDBString]
	[PXUIField(DisplayName = "Status")]
	public string Status { get; set; }
	public abstract class status : IBqlField { }
	[PXDBTimestamp]
	public virtual byte[] tstamp { get; set; }
	public abstract class Tstamp : IBqlField { }
}
```

## Related Articles

[Primary Key](https://help.acumatica.com/(W(7))/Help?ScreenId=ShowWiki&pageid=9e533998-5a08-452d-9490-a02db1cf4c19)
[To Define a Primary Key](https://help.acumatica.com/(W(8))/Help?ScreenId=ShowWiki&pageid=34e875c7-a5c3-496e-9e2b-f7f6f9f20a40)
[PXCacheNameAttribute Class](https://help.acumatica.com/(W(9))/Help?ScreenId=ShowWiki&pageid=6e89e21c-b8f4-a16b-d741-2d6e483e9f65)
[PXPrimaryGraphAttribute Class](https://help.acumatica.com/(W(10))/Help?ScreenId=ShowWiki&pageid=1dceb511-4e98-3700-7d7f-231688a7ac74)