# PX1030
This document describes the PX1030 diagnostic.

## Summary

| Code   | Short Description                                         | Type                           | Code Fix  | 
| ------ | --------------------------------------------------------- | ------------------------------ | --------- | 
| PX1030 | The PXDefault attribute of the field is used incorrectly. | Warning (Level 1: Significant) | Available | 

## Diagnostic Description
The `PXDefault` attribute used on a custom field defined in `PXCacheExtension` should have `PersistingCheck = PXPersistingCheck.Nothing`. For an unboud field, the `PXDefault` attribute can be replaced with `PXUnboundDefault`.

If the `PXDefault` attribute is used without the `PersistingCheck` property set to `Nothing`, the attribute used on a custom field defined in `PXCacheExtension` can prevent updates to existing records.

For a bound field, the code fix adds `PersistingCheck = PXPersistingCheck.Nothing` to the `PXDefault` attribute.

For an unbound field, you can select one of the following two code fixes:

 - Change the `PXDefault` attribute to `PXUnboundDefault`
 - Add `PersistingCheck = PXPersistingCheck.Nothing` to the `PXDefault` attribute

## Example of the Code That Produces the Warning: Bound Field

```C#
public class CAAdjExtension : PXCacheExtension<CAAdj>
{
    ...
    #region UsrNPCADocLineCntr
    public abstract class usrNPCADocLineCntr : IBqlField
    {
    }
    [PXDBInt]
    [PXDefault(0)]
    public virtual int? UsrNPCADocLineCntr { get; set; }
    #endregion
    ...
}
```

## Code Fix Example: Bound Field

```C#
public class CAAdjExtension : PXCacheExtension<CAAdj>
{
    ...
    #region UsrNPCADocLineCntr
    public abstract class usrNPCADocLineCntr : IBqlField
    {
    }
    [PXDBInt]
    [PXDefault(0, PersistingCheck = PXPersistingCheck.Nothing)]
    public virtual int? UsrNPCADocLineCntr { get; set; }
    #endregion
    ...
}
```

## Example of the Code That Produces the Warning: Unbound Field

```C#
public class CAAdjExtension : PXCacheExtension<CAAdj>
{
    ...
    #region UsrNPCADocLineCntr
    public abstract class usrNPCADocLineCntr : IBqlField
    {
    }
    [PXInt]
    [PXDefault(0)]
    public virtual int? UsrNPCADocLineCntr { get; set; }
    #endregion
    ...
}
```

## Code Fix Example: Unbound Field (Option 1)

```C#
public class CAAdjExtension : PXCacheExtension<CAAdj>
{
    ...
    #region UsrNPCADocLineCntr
    public abstract class usrNPCADocLineCntr : IBqlField
    {
    }
    [PXInt]
    [PXUnboundDefault]
    public virtual int? UsrNPCADocLineCntr { get; set; }
    #endregion
    ...
}
```

## Code Fix Example: Unbound Field (Option 2)

```C#
public class CAAdjExtension : PXCacheExtension<CAAdj>
{
    ...
    #region UsrNPCADocLineCntr
    public abstract class usrNPCADocLineCntr : IBqlField
    {
    }
    [PXInt]
    [PXDefault(0, PersistingCheck = PXPersistingCheck.Nothing)]
    public virtual int? UsrNPCADocLineCntr { get; set; }
    #endregion
    ...
}
```