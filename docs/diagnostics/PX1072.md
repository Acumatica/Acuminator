# PX1072
This document describes the PX1072 diagnostic.

## Summary

| Code   | Short Description                                                                  | Type                           | Code Fix  | 
| ------ | ---------------------------------------------------------------------------------- | ------------------------------ | --------- | 
| PX1072 | BQL queries must be executed within the context of an existing `PXGraph` instance. | Warning (Level 1: Significant) | Available | 

## Diagnostic Description
The `new PXGraph()` statement should not be used in execution of BQL queries. Instead, an existing `PXGraph` instance should be used. Because creation of a `PXGraph` instance is an expensive operation, instantiation of unnecessary graph instances slows the performance of the application.

The code fix replaces `new PXGraph()` with one of the existing `PXGraph` instances by your choise.

## Example of Code That Results in the Warning

```C#
public class ARInvoiceEntry : PXGraph<ARInvoiceEntry, ARInvoice>
{
	public ARInvoice GetInvoice(PXGraph graph, string refNbr)
	{
		var invoiceEntry = PXGraph.CreateInstance<ARInvoiceEntry>();

		var invoice = PXSelect<ARInvoice, Where<ARInvoice.refNbr, Equal<Required<ARInvoice.refNbr>>>>
			.Select(new PXGraph(), refNbr); //The PX1072 warnining is displayed for this line.
	}
}
```

## Example of Code Fix

```C#
public class ARInvoiceEntry : PXGraph<ARInvoiceEntry, ARInvoice>
{
	public ARInvoice GetInvoice(PXGraph graph, string refNbr)
	{
		var invoiceEntry = PXGraph.CreateInstance<ARInvoiceEntry>();

        //First variant of fix
		var invoice = PXSelect<ARInvoice, Where<ARInvoice.refNbr, Equal<Required<ARInvoice.refNbr>>>>
			.Select(this, refNbr); //`new PXGraph()` is replaced with `this` instance.
        /*
        // Second variant of fix
        var invoice = PXSelect<ARInvoice, Where<ARInvoice.refNbr, Equal<Required<ARInvoice.refNbr>>>>
			.Select(graph, refNbr); //`new PXGraph()` is replaced with `graph` instance. 
        // Third variant of fix
        var invoice = PXSelect<ARInvoice, Where<ARInvoice.refNbr, Equal<Required<ARInvoice.refNbr>>>>
			.Select(invoiceEntry, refNbr); //`new PXGraph()` is replaced with `invoiceEntry` instance. 
        */
	}
}
```